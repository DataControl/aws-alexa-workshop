<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<html lang="en" class="js csstransforms3d">
<head>
  <meta charset="utf-8">
  <meta property="og:title" content="Alexa &amp; IoT Workshop" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="generator" content="Hugo 0.58.3" />
  <meta name="description" content="Alexa &amp; IoT Workshop">
<meta name="author" content="Massimiliano Angelino">

  <link rel="shortcut icon" href="https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico" type="image/ico" />
<link rel="icon" href="https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico" type="image/ico" />

  <title>1. FreeRTOS and Amazon FreeRTOS :: Alexa &amp; IoT Workshop</title>

  
  <link href="../css/nucleus.css" rel="stylesheet">
  <link href="../css/fontawesome-all.min.css" rel="stylesheet">
  <link href="../css/hybrid.css" rel="stylesheet">
  <link href="../css/featherlight.min.css" rel="stylesheet">
  <link href="../css/perfect-scrollbar.min.css" rel="stylesheet">
  <link href="../css/auto-complete.css" rel="stylesheet">
  <link href="../css/atom-one-dark-reasonable.css" rel="stylesheet">
  <link href="../css/theme.css" rel="stylesheet">
  <link href="../css/hugo-theme.css" rel="stylesheet">
  
  <link href="../css/theme-aws.css" rel="stylesheet">
  

  <script src="../js/jquery-3.3.1.min.js"></script>

  <style>
    :root #header + #content > #left > #rlblock_left{
        display:none !important;
    }
    
      :not(pre) > code + span.copy-to-clipboard {
          display: none;
      }
    
  </style>
  
</head>

<body class="" data-url="/advanced/1.freertos-and-afr.html">
  <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <div>
    <a href="../" title="Go home">
        <img style="vertical-align:middle" src="../images/logo.png" height="70px" />
    </a>
</div>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../js/lunr.min.js"></script>
<script type="text/javascript" src="../js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "";
    
</script>
<script type="text/javascript" src="../js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/introduction.html" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="../introduction.html">
          Introduction
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/introduction/what-you-will-learn.html" title="What will you learn" class="dd-item ">
        <a href="../introduction/what-you-will-learn.html">
        What will you learn
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/alexa-skills.html" title="What is Alexa Skills" class="dd-item ">
        <a href="../introduction/alexa-skills.html">
        What is Alexa Skills
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/alexa-skill-model.html" title="Alexa Skill Model" class="dd-item ">
        <a href="../introduction/alexa-skill-model.html">
        Alexa Skill Model
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/getting-started.html" title="Getting Started" class="dd-item 
        
        
        
        ">
      <a href="../getting-started.html">
          Getting Started
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/getting-started/prereq.html" title="1. Prerequisites" class="dd-item ">
        <a href="../getting-started/prereq.html">
        1. Prerequisites
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/getting-started/create-cloud9-env.html" title="2. Setup AWS Cloud9" class="dd-item ">
        <a href="../getting-started/create-cloud9-env.html">
        2. Setup AWS Cloud9
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/smart-home.html" title="Smart Home Skills" class="dd-item 
        
        
        
        ">
      <a href="../smart-home.html">
          Smart Home Skills
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/smart-home/deploy_app.html" title="1. Companion App" class="dd-item 
        
        
        
        ">
      <a href="../smart-home/deploy_app.html">
          1. Companion App
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/smart-home/deploy_app/deploy_amplify_console.html" title="Deploy with Console" class="dd-item ">
        <a href="../smart-home/deploy_app/deploy_amplify_console.html">
        Deploy with Console
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smart-home/deploy_app/deploy_amplify_cli.html" title="Deploy with CLI" class="dd-item ">
        <a href="../smart-home/deploy_app/deploy_amplify_cli.html">
        Deploy with CLI
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smart-home/2.smart-lamp-simulator.html" title="2. Smart Lamp" class="dd-item ">
        <a href="../smart-home/2.smart-lamp-simulator.html">
        2. Smart Lamp
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smart-home/3.bind-device.html" title="3. Claim the device" class="dd-item ">
        <a href="../smart-home/3.bind-device.html">
        3. Claim the device
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smart-home/4.create-skill.html" title="4. Create Smart Home Skill" class="dd-item ">
        <a href="../smart-home/4.create-skill.html">
        4. Create Smart Home Skill
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smart-home/6.account-linking.html" title="5. Setup Account Linking" class="dd-item ">
        <a href="../smart-home/6.account-linking.html">
        5. Setup Account Linking
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smart-home/7.create-lambda.html" title="6. Create the Alexa backend" class="dd-item ">
        <a href="../smart-home/7.create-lambda.html">
        6. Create the Alexa backend
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smart-home/8.device-discovery.html" title="7. Discover Smart Home Devices" class="dd-item ">
        <a href="../smart-home/8.device-discovery.html">
        7. Discover Smart Home Devices
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/smart-home/9a.test-skill.html" title="8. Test Smart Home Skill" class="dd-item ">
        <a href="../smart-home/9a.test-skill.html">
        8. Test Smart Home Skill
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/advanced.html" title="A Real Device" class="dd-item 
        parent
        
        
        ">
      <a href="../advanced.html">
          A Real Device
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/advanced/1.freertos-and-afr.html" title="1. FreeRTOS and Amazon FreeRTOS" class="dd-item active">
        <a href="../advanced/1.freertos-and-afr.html">
        1. FreeRTOS and Amazon FreeRTOS
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/2.hw-kit.html" title="2. Hardware kit" class="dd-item ">
        <a href="../advanced/2.hw-kit.html">
        2. Hardware kit
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/3.install-tool-chain.html" title="3. Your first Amazon FreeRTOS project" class="dd-item ">
        <a href="../advanced/3.install-tool-chain.html">
        3. Your first Amazon FreeRTOS project
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/4.afr-lamp.html" title="4. Smart lamp" class="dd-item ">
        <a href="../advanced/4.afr-lamp.html">
        4. Smart lamp
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/5.connecting.html" title="5. Enable Alexa" class="dd-item ">
        <a href="../advanced/5.connecting.html">
        5. Enable Alexa
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cleanup.html" title="Conclusion" class="dd-item 
        
        
        
        ">
      <a href="../cleanup.html">
          Conclusion
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cleanup/destroy-resource.html" title="Conclusion &amp; Destroy AWS Resources" class="dd-item ">
        <a href="../cleanup/destroy-resource.html">
        Clean up
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <left>

    <h5 class="copyright">&copy; 2019 Amazon Web Services, Inc. or its Affiliates. All rights reserved.<h5>

</left>

    </section>
  </div>
</nav>





  <section id="body">
    <div id="overlay"></div>
    <div class="padding highlightable">
      
      <div>
        <div id="top-bar">
          
          
          
          
          <div id="top-github-link">
            <a class="github-link" title='Edit this page' href="https://github.com/massi-ang/aws-alexa-workshop/tree/smarthome-enadvanced/1.freertos-and-afr.md"
              target="blank">
              <i class="fas fa-code-branch"></i>
              <span id="top-github-link-text">Edit this page</span>
            </a>
          </div>
          
          
          
          <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            
            <span class="links">
              
          
          
          
          
          
          
          
          
          
          
          <a href='../'>AWS IoT & Alexa Workshop</a> > <a href='../advanced.html'>A Real Device</a> > 1. FreeRTOS and Amazon FreeRTOS
          
          
          
          
          
          
            </span>
          </div>
          
          <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#programming-mcus">Programming MCUs</a>
<ul>
<li><a href="#super-loop">Super-loop</a></li>
<li><a href="#rtos">RTOS</a></li>
</ul></li>
<li><a href="#freertos">FreeRTOS</a></li>
<li><a href="#amazon-freertos">Amazon FreeRTOS</a></li>
<li><a href="#what-you-will-learn">What you will learn</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          
        </div>
      </div>
      

      
        <div id="body-inner">
          <h1>1. FreeRTOS and Amazon FreeRTOS</h1>
          
          




<h2 id="programming-mcus">Programming MCUs</h2>

<p>When programming microcontrollers there are mainly 2 paradigms:</p>

<ul>
<li>the super-loop</li>
<li>real-time operating system</li>
</ul>

<h3 id="super-loop">Super-loop</h3>

<p>In the super-loop model, think Arduino, the program consist in an infinite loop that executes each step in a given sequence, evaluates the different branches in sequence, etc. Complex logix become easily
unmanegeable in this model and it is not easy to prioritize certain operations compared to other.</p>

<h3 id="rtos">RTOS</h3>

<p>An <a href="https://en.wikipedia.org/wiki/Real-time_operating_system" target="_blank">RTOS</a> doesn&rsquo;t normally provides all the features or OSes like Linux or Windows. At is core an RTOS provides a mechanism to schedule tasks to be executed on the MCU in order to achieve a time bound execution time.
Each task is assigned a priority and tasks with higher priority might be able to pre-empt tasks with lower prio.</p>

<h2 id="freertos">FreeRTOS</h2>

<p>FreeRTOS is an Open Source Real Time operating system with support for over 30 embedded system architectures, such as MIPS, ARM7, ARM Cortex-M3, Xtensa.</p>

<p>The OS itself has a small footprint of between 4K to 9Kbytes, is written in C and is highly portable.</p>

<p>It provides different schedulers to control the execution of the task and a broad range of <a href="https://www.freertos.org/Inter-Task-Communication.html" target="_blank">inter-task communication</a> mechanisms.</p>

<p>It also includes a <a href="https://www.freertos.org/low-power-tickless-rtos.html" target="_blank">low power mode</a> for embedded application that have to run on battery.</p>

<p>You can find a summary of the FreeRTOS kernel fundamentals <a href="https://docs.aws.amazon.com/freertos/latest/userguide/dev-guide-freertos-kernel.html" target="_blank">here</a>.</p>

<h2 id="amazon-freertos">Amazon FreeRTOS</h2>

<p>Amazon FreeRTOS is open source and it extends the FreeRTOS kernel, the most popular real-time operating system for microcontrollers. With Amazon FreeRTOS, you can take advantage of the large ecosystem of existing tools developed for the FreeRTOS kernel. If you are already using the FreeRTOS kernel on your existing devices, you can choose to use Amazon FreeRTOS and take advantage of the functionality provided by the additional libraries, or continue to use just the kernel operating system.</p>

<p>Amazon FreeRTOS includes software libraries that make it easy to program commonly needed IoT capabilities into your device, including libraries that help configure devices to a local network using common connectivity options like Wi-Fi or Ethernet, or connect to a mobile device using Bluetooth Low Energy. Amazon FreeRTOS also includes an over-the-air (OTA) update feature to remotely update devices with feature enhancements or security patches.</p>

<p><img src="../images/afr.png" alt="" /></p>

<h2 id="what-you-will-learn">What you will learn</h2>

<p>In this lab you will:</p>

<ul>
<li>Install and configure the ESP32 toolchain</li>
<li>Compile and install a microcontroller firmware based on <a href="https://aws.amazon.com/freertos/" target="_blank">Amazon FreeRTOS</a></li>
<li>Modify the firmware so that the ESP32 can respond to Alexa directives</li>
</ul>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../advanced.html" title="A Real Device"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../advanced/2.hw-kit.html" title="2. Hardware kit" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../js/clipboard.min.js"></script>
    <script src="../js/perfect-scrollbar.min.js"></script>
    <script src="../js/perfect-scrollbar.jquery.min.js"></script>
    <script src="../js/jquery.sticky.js"></script>
    <script src="../js/featherlight.min.js"></script>
    <script src="../js/html5shiv-printshiv.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../js/modernizr.custom-3.6.0.js"></script>
    <script src="../js/learn.js"></script>
    <script src="../js/hugo-learn.js"></script>

    <link href="../mermaid/mermaid.css" rel="stylesheet" />
    <script src="../mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
  </body>
</html>

